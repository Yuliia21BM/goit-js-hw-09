{"mappings":"gfAAA,IAAAA,EAAAC,EAAA,SAEMC,EAASC,SAASC,cAAc,SAEtCF,EAAOG,iBAAiB,SAaxB,SAAqBC,GACG,UAAlBA,EAAEC,OAAOC,KACXC,EAAaC,OAAOJ,EAAEC,OAAOI,OACF,SAAlBL,EAAEC,OAAOC,KAClBI,EAAYF,OAAOJ,EAAEC,OAAOI,OACD,WAAlBL,EAAEC,OAAOC,OAClBK,EAASH,OAAOJ,EAAEC,OAAOI,O,IAlB7BT,EAAOG,iBAAiB,UAsBxB,SAAsBC,GACpBA,EAAEQ,iBAEF,IAAK,IAAIC,EAAI,EAAGA,GAAKF,EAAQE,GAAK,EAChCC,EAAQC,KAAKF,GAGfG,YAAW,WACTF,EAAQG,KAAI,WAoBhB,IAAuBC,EAAUC,GAAVD,EApBeE,IAoBLD,EApBwBE,IAAiBd,EAqBxD,IAAIe,SAAQ,SAACC,EAASC,GACpC,IAAMC,EAAgBC,KAAKC,SAAW,GACtCX,YAAW,WACLS,EACFF,EAAQ,uBAAwCK,OAAfV,EAAS,QAAYU,OAANT,EAAM,OAEpDK,EAAK1B,EAAA+B,OAAOC,QAAQ,sBAAqCF,OAAfV,EAAS,QAAYU,OAANT,EAAM,O,GAElEA,E,KA7BgFY,MAAK,SAAAC,G,OAAUlC,EAAA+B,OAAOI,QAAQD,E,IAASE,OAAM,SAAAC,G,OAASrC,EAAA+B,OAAOC,QAAQK,E,SACvJ5B,E,IA7BL,IAiCM6B,EAjCF7B,EAAa,EACbG,EAAY,EACZC,EAAS,EACPS,GA8BAgB,EAAQ,EACL,WAEL,OADAA,GAAS,C,GA/BPf,EAoCN,WACE,IAAIe,EAAQ7B,EAAaG,EACzB,OAAO,WAEL,OADA0B,GAAS1B,C,EAvCQ2B,GAEfvB,EAAU,E","sources":["src/js/03-promises.js"],"sourcesContent":["import { Notify } from 'notiflix/build/notiflix-notify-aio';\n\nconst formEl = document.querySelector('.form');\n\nformEl.addEventListener('input', onFormInput);\nformEl.addEventListener('submit', onFormSubmit)\n\nlet firstDelay = 0;\nlet dalayStep = 0;\nlet amount = 0;\nconst promiseCounter = counterOfPromises();\nconst dilayCounter = counterOfDilay();\n\nconst counter = [];\n\n\n\nfunction onFormInput(e) {\n  if (e.target.name === \"delay\") {\n    firstDelay = Number(e.target.value);\n  } else if (e.target.name === \"step\") {\n    dalayStep = Number(e.target.value);\n  } else if (e.target.name === \"amount\") {\n    amount = Number(e.target.value);\n  }\n}\n\nfunction onFormSubmit(e) {\n  e.preventDefault();\n\n  for (let i = 1; i <= amount; i += 1) {\n    counter.push(i);\n  }\n  \n  setTimeout(() => {\n    counter.map(() => { createPromise(promiseCounter(), (dilayCounter() + firstDelay)).then(result => Notify.success(result)).catch(error => Notify.failure(error)) });\n  }, firstDelay);\n}\n\nfunction counterOfPromises() {\n  let count = 0;\n  return function () {\n    count += 1;\n    return count;\n  }\n}\n\nfunction counterOfDilay() {\n  let count = firstDelay + dalayStep;\n  return function () {\n    count += dalayStep;\n    return count;\n  }\n}\n\nfunction createPromise(position, delay) {\n  const promise = new Promise((resolve, reject) => {\n    const shouldResolve = Math.random() > 0.3;\n    setTimeout(() => {\n      if (shouldResolve) {\n        resolve(`✅ Fulfilled promise ${position} in ${delay}ms`);\n      } else {\n        reject(Notify.failure(`❌ Rejected promise ${position} in ${delay}ms`));\n      }\n    }, delay);\n  }\n  )\n  return promise;\n}\n\n"],"names":["$h6c0i","parcelRequire","$ce04d3a99e08e73b$var$formEl","document","querySelector","addEventListener","e","target","name","$ce04d3a99e08e73b$var$firstDelay","Number","value","$ce04d3a99e08e73b$var$dalayStep","$ce04d3a99e08e73b$var$amount","preventDefault","i","$ce04d3a99e08e73b$var$counter","push","setTimeout","map","position","delay","$ce04d3a99e08e73b$var$promiseCounter","$ce04d3a99e08e73b$var$dilayCounter","Promise","resolve","reject","shouldResolve","Math","random","concat","Notify","failure","then","result","success","catch","error","count","$ce04d3a99e08e73b$var$counterOfDilay"],"version":3,"file":"03-promises.be04eaab.js.map"}